<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Markov Chains Demystified | Ray</title>
<meta name="keywords" content="Big Data, Information Retrieval, Graph Theory">
<meta name="description" content="The Secret Sauce Behind PageRank Algorithm">
<meta name="author" content="Ray">
<link rel="canonical" href="https://nzaba.github.io/posts/pagerank/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css" integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO&#43;tN6uT1w=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://nzaba.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://nzaba.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nzaba.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nzaba.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://nzaba.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>

<meta property="og:title" content="Markov Chains Demystified" />
<meta property="og:description" content="The Secret Sauce Behind PageRank Algorithm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nzaba.github.io/posts/pagerank/" /><meta property="og:image" content="https://nzaba.github.io/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-08-14T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://nzaba.github.io/papermod-cover.png"/>

<meta name="twitter:title" content="Markov Chains Demystified"/>
<meta name="twitter:description" content="The Secret Sauce Behind PageRank Algorithm"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://nzaba.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Markov Chains Demystified",
      "item": "https://nzaba.github.io/posts/pagerank/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Markov Chains Demystified",
  "name": "Markov Chains Demystified",
  "description": "The Secret Sauce Behind PageRank Algorithm",
  "keywords": [
    "Big Data, Information Retrieval, Graph Theory"
  ],
  "articleBody": "The Secret Sauce Behind PageRank Algorithm\n1. Abstract What happens when you search for a term on your browser? Google‚Äôs PageRank algorithm has revolutionized how the world accesses data on the web. The computation involved in ordering search results entails the indexing of trillions of pages and the creation of high dimensional structures to store and calculate different probabilities. This article provides a general overview of how the algorithm works by briefly exploring the general theory behind PageRank. In addition to explaining the mathematical foundations of PageRank, this article will present a simulation meant to help the reader gain some intuition of the stochastic nature of this algorithm. Also, it looks at some of the caveats including how PageRank deals with dangling links.\nRandom surfer on the web\n2. Introduction In the 1998 paper Bringing Order to the Web, Sergey Brin and Larry Page describe PageRank as a method for rating Web pages objectively and mechanically, effectively measuring the human interest and attention devoted to them. Simply put, the importance of a page can be thought of in terms of the probability that a random walk through the web will end up on a given webpage. This algorithm captures the global ranking of all web pages based on their location in the world wide web‚Äôs graph structure.\n3. Theory The underpinnings of PageRank are based on the hyperlink structure of different pages on the web. The links pointing to a page are considered as a recommendation from the page containing the outbound link. Inlinks from good pages (pages with a higher rank) carry more weight than those from less important pages. Each webpage is assigned an appropriate score which helps determine the importance and authority of the page. The importance of any page is increased by the number and quality of sites which link to it. The following equation represents the rank of any given page $P$:\n$r(P) = \\sum _ { Q \\in B _ { P } } \\frac { r ( Q ) } { | Q | }$ where $B_P$ = all pages pointing to $P$ and $|Q|$ = number of outlinks from $Q$.\n3.1 Computation 3.1.1 Markov model Given x connected webpages, how would we rank them in order of importance? As mentioned earlier, this process constitutes a random walk on a graph representing different pages on the web. The walk‚Äôs position at any fixed time only depends on the last vertex (webpage) visited and not on the previous locations of the walk. Any time we are at a given node of the graph, we choose an edge (hyperlink) uniformly at random to determine the node to visit at the next step. This sequence maintains a transition matrix M whose columns contain the series of probability vectors $\\vec { x } _ { 0 } , \\vec { x } _ { 1 } , \\vec { x } _ { 2 } , \\dots$. The transition probabilities and the transition matrix for a random walk through this system are defined as:\n$M _ { i j } = \\left\\{ \\begin{array} { l l } { P \\left( X _ { 1 } = j | X _ { 0 } = i \\right) = 1 / \\operatorname { link } ( i ) , } \u0026 { \\text { if } i \\vec { \\sim } j } \\\\ { 0 , } \u0026 { \\text { otherwise } } \\end{array} \\right.$ Where $i \\vec { \\sim } j$ represents a directed edge from page i to page j and link$(i)$ represents the number of directed edges from i. The random surfer process can be visualized in a matrix containing probabilities that show the likelihoods of moving from one page to every other page. The matrix is row normalized with nonzero elements of row i corresponding to the outlinking pages of page i. The nonzero elements of column i correspond to the inlinking pages of page i.\n$M = \\left[ \\begin{array} { c c c c c } { 0 } \u0026 { 0 } \u0026 { 1 / 2 } \u0026 { 0 } \u0026 { 1 / 2 } \\\\ { 0 } \u0026 { 0 } \u0026 { 1 } \u0026 { 0 } \u0026 { 0 } \\\\ { 1 / 4 } \u0026 { 1 / 4 } \u0026 { 0 } \u0026 { 1 / 4 } \u0026 { 1 / 4 } \\\\ { 0 } \u0026 { 0 } \u0026 { 1 / 2 } \u0026 { 0 } \u0026 { 1 / 2 } \\\\ { 0 } \u0026 { 0 } \u0026 { 0 } \u0026 { 0 } \u0026 { 1 } \\end{array} \\right]$ These initial ranks are successively updated by adding up the weights of every page that link to them divided by the number of links emanating from the referring page. If a page has no outlinks, its rank is equally redistributed to the other pages in the graph. This redistribution is applied to all the pages in the graph until the ranks stabilize. Computing this distribution is the equivalent of taking the limiting distribution of the chain containing all the ranks.\n3.1.2 Damping factor In practice, the PageRank algorithm adds a damping factor $d$ at each stage to prevent pages with no outgoing links from affecting the PageRanks of pages connected to them. This heuristic relfects the probability that a random surfer on the web may choose to randomly ‚Äújump‚Äù from one node to another in the web graph. This may happen when he decides to type another page‚Äôs address directly into the search bar on the browser after hitting a dead end. The damping factor ranges from 0 - 1 where 0 corresponds to successive random jumps between different pages and 1 to a sequence of random successive clicks that inevitably lead to a page with no outgoing links. The sum of weighted PageRanks of all pages is multiplied by this value.\n3.2 Simulating PageRank In this section, R code that simulates PageRank is presented. It begins by generating a random n by n adjacency matrix containing the link structure between different pairs of pages in an arbitrary web system and proceeds as follows:\n# Define function to generate an adjacency matrix A_gen \u003c- function (n, d) { A \u003c- matrix(sample(0:1, n*n, prob = c(1-d, d), replace = T), ncol = n, byrow = T) return(A) } The adjacency matrix generated above and the damping factor $d$ are used as inputs to the page_rank() function defined below which calculates the ranks of all the vertices in the graph. The process starts with the initialization of a transition matrix and proceeds to iteratively calculate the rank of all pages until the Markov chain converges. # Define PageRank function (p = probability of teleport) PageRank \u003c- function (A, p, output = T) { # Define assertions if (!is.matrix(A) | !all(A %in% 0:1)) { stop(noquote('no (valid) adjacency matrix is provided.')) } else if (!is.numeric(p) | p \u003c 0 | p \u003e 1) { stop(noquote('p must be a probability between 0 and 1.')) } # Initialize transition matrix s \u003c- matrix(rep(NA, ncol(A)), ncol = ncol(A)) s[1, ] \u003c- rep(1/ncol(A), ncol(A)) i \u003c- 1 # Repeat Markov Chain until convergence while (T) { # Calculate transition vector at t + 1 t \u003c- rep(NA, ncol(A)) for (j in 1:ncol(A)) { t[j] \u003c- ifelse(sum(A[j, ]) == 0 , 1 / ncol(A) , p / ncol(A) + (1 - p) * sum(A[, j] * (s[i, ] / apply(A, 1, sum))))} s \u003c- rbind(s, t) i \u003c- i + 1 # Break if converged if (i \u003e 1) if (all(round(s[i - 1, ], 4) == round(s[i, ], 4))) break } # Build and return output rank \u003c- data.frame(as.character(1:ncol(s)), round(s[i, ], 4), rep(p, ncol(A))) colnames(rank) \u003c- c('Node', 'PageRank', 'P') if (output) { cat(noquote('PageRank Output:\\n\\n')) print(rank[order(-rank$PageRank), c('Node', 'PageRank')], row.names = F) cat(noquote(paste('\\nPageRank converged in', i, 'iterations.'))) } else { return(rank[order(-rank$PageRank), ]) } } # Generate graph set.seed(327) A \u003c- A_gen(10, .6) The process modeled above is ran on a graph with 10 vertices and r sum(A) edges. A visual representation of how different nodes in the graph are connected is also generated. Below it, is output showing the page ranks of all 10 nodes. # Plot the graph plot(graph.adjacency(A,'directed')) # Run PageRank on example graph above with d = 0.2 PageRank(A, .2) ## ## Node: PageRank ## 2 0.1419\t## 1 0.1143\t## 3 0.1103\t## 9\t0.1078 ## 10 0.1056 ## 7 0.0995 ## 6 0.0916 ## 4\t0.0904\t## 8 0.0803 ## 5 0.0582 3. Limitations The original paper on PageRank by Brin et al (1998) presents dangling links on the web as a pertinent issue affecting the model. It decribes them as links that point to pages with no outgoing links and states that they affect the model because it is not clear where their weights should be distributed. The ultimate proposition made in the paper is the removal of all these links until all the PageRanks are calculated. Brin and Page postulate that the addition of these links thereafter doesn‚Äôt affect things significantly.\n4. Conclusion PageRank is a powerful tool that has greatly simplified and democratized the access to information on the web. The advent of this algorithm has seen the emergence of a Search Engine Optimization industry which is a discipline focused on organically increasing the reputation of online content to increase visibility and improve rankings on the web. However, one of the major challenges this poses to PageRank is that commercial entities may try to artificially game the system to increase the visibility of their online content.\n5. References Langville, Amy N., and Carl D. Meyer. ‚ÄúThe Mathematics of Google‚Äôs PageRank.‚Äù Google‚Äôs PageRank and Beyond: The Science of Search Engine Rankings, Princeton University Press, 2006, pp. 31‚Äì46. JSTOR, www.jstor.org/stable/j.ctt7t8z9.7.\nBenincasa, Catherine \u0026 Calden, Adena \u0026 Hanlon, Emily \u0026 Kindzerske, Matthew \u0026 Law, Kody \u0026 Lam, Eddery \u0026 Rhoades, John \u0026 Roy, Ishani \u0026 Satz, Michael \u0026 Valentine, Eric \u0026 Whitaker, N. (2018). Page Rank Algorithm.\nDobrow, R. P.. Probability : With Applications and R, John Wiley \u0026 Sons, Incorporated, 2013. ProQuest Ebook Central, https://ebookcentral.proquest.com/lib/amherst/detail.action?docID=1449975.\nSergey Brin, and Larry Page. Bringing Order to the Web.\nHwai-Hui Fu, et al. ‚ÄúAPPLIED STOCHASTIC MODELS IN BUSINESS AND INDUSTRY.‚Äù Damping Factor in Google Page Ranking, 29 June 2006, pp. 1‚Äì14.\nhttps://en.wikipedia.org/wiki/PageRank\n",
  "wordCount" : "1734",
  "inLanguage": "en",
  "datePublished": "2023-08-14T00:00:00Z",
  "dateModified": "2023-08-14T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Ray"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nzaba.github.io/posts/pagerank/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ray",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nzaba.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nzaba.github.io/" accesskey="h" title="Ray (Alt + H)">Ray</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://nzaba.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://nzaba.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Markov Chains Demystified
    </h1>
    <div class="post-description">
      The Secret Sauce Behind PageRank Algorithm
    </div>
    <div class="post-meta"><span title='2023-08-14 00:00:00 +0000 UTC'>August 14, 2023</span>&nbsp;¬∑&nbsp;9 min&nbsp;¬∑&nbsp;Ray

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-abstract" aria-label="1. Abstract">1. Abstract</a></li>
                <li>
                    <a href="#2-introduction" aria-label="2. Introduction">2. Introduction</a></li>
                <li>
                    <a href="#3-theory" aria-label="3. Theory">3. Theory</a><ul>
                        
                <li>
                    <a href="#31-computation" aria-label="3.1 Computation">3.1 Computation</a><ul>
                        
                <li>
                    <a href="#311-markov-model" aria-label="3.1.1 Markov model">3.1.1 Markov model</a></li>
                <li>
                    <a href="#312-damping-factor" aria-label="3.1.2 Damping factor">3.1.2 Damping factor</a></li></ul>
                </li>
                <li>
                    <a href="#32-simulating-pagerank" aria-label="3.2 Simulating PageRank">3.2 Simulating PageRank</a></li></ul>
                </li>
                <li>
                    <a href="#3-limitations" aria-label="3. Limitations">3. Limitations</a></li>
                <li>
                    <a href="#4-conclusion" aria-label="4. Conclusion">4. Conclusion</a></li>
                <li>
                    <a href="#5-references" aria-label="5. References">5. References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>The Secret Sauce Behind PageRank Algorithm</p>
<h3 id="1-abstract">1. Abstract<a hidden class="anchor" aria-hidden="true" href="#1-abstract">#</a></h3>
<p>What happens when you search for a term on your browser? Google&rsquo;s PageRank algorithm has revolutionized how the world accesses data on the web. The computation involved in ordering search results entails the indexing of trillions of pages and the creation of high dimensional structures to store and calculate different probabilities. This article provides a general overview of how the algorithm works by briefly exploring the general theory behind PageRank. In addition to explaining the mathematical foundations of PageRank, this article will present a simulation meant to help the reader gain some intuition of the stochastic nature of this algorithm. Also, it looks at some of the caveats including how PageRank deals with dangling links.</p>
<img align="middle" src="https://raw.githubusercontent.com/Nzaba/nzaba.github.io/main/content/posts/imgs/Random%20Surfer.jpeg">
<blockquote>
<p>Random surfer on the web</p>
</blockquote>
<h3 id="2-introduction">2. Introduction<a hidden class="anchor" aria-hidden="true" href="#2-introduction">#</a></h3>
<p>In the 1998 paper Bringing Order to the Web, Sergey Brin and Larry Page describe PageRank as a method for rating Web pages objectively and mechanically, effectively measuring the human interest and attention devoted to them. Simply put, the importance of a page can be thought of in terms of the probability that a random walk through the web will end up on a given webpage. This algorithm captures the global ranking of all web pages based on their location in the world wide web&rsquo;s graph structure.</p>
<h3 id="3-theory">3. Theory<a hidden class="anchor" aria-hidden="true" href="#3-theory">#</a></h3>
<p>The underpinnings of PageRank are based on the hyperlink structure of different pages on the web. The links pointing to a page are considered as a recommendation from the page containing the outbound link. Inlinks from good pages (pages with a higher rank) carry more weight than those from less important pages. Each webpage is assigned an appropriate score which helps determine the importance and authority of the page. The importance of any page is increased by the number and quality of sites which link to it. The following equation represents the rank of any given page $P$:</p>


$r(P) = \sum _ { Q \in B _ { P } } \frac { r ( Q ) } { | Q | }$


<p>where $B_P$ = all pages pointing to $P$ and $|Q|$ = number of outlinks from $Q$.</p>
<h4 id="31-computation">3.1 Computation<a hidden class="anchor" aria-hidden="true" href="#31-computation">#</a></h4>
<h5 id="311-markov-model">3.1.1 Markov model<a hidden class="anchor" aria-hidden="true" href="#311-markov-model">#</a></h5>
<p>Given x connected webpages, how would we rank them in order of importance? As mentioned earlier, this process constitutes a random walk on a graph representing different pages on the web. The walk‚Äôs position at any fixed time only depends on the last vertex (webpage) visited and not on the previous locations of the walk. Any time we are at a given node of the graph, we choose an edge (hyperlink) uniformly at random to determine the node to visit at the next step. This sequence maintains a transition matrix M whose columns contain the series of probability vectors $\vec { x } _ { 0 } , \vec { x } _ { 1 } , \vec { x } _ { 2 } , \dots$. The transition probabilities and the transition matrix for a random walk through this system are defined as:</p>


$M _ { i j } = \left\{ \begin{array} { l l } { P \left( X _ { 1 } = j | X _ { 0 } = i \right) = 1 / \operatorname { link } ( i ) , } & { \text { if } i \vec { \sim  } j } \\ { 0 , } & { \text { otherwise } } \end{array} \right.$


<p>Where $i \vec { \sim  } j$ represents a directed edge from page i to page j and link$(i)$ represents the number of directed edges from i. The random surfer process can be visualized in a matrix containing probabilities that show the likelihoods of moving from one page to every other page. The matrix is row normalized with nonzero elements of row i corresponding to the outlinking pages of page i. The nonzero elements of column i correspond to the inlinking pages of page i.</p>


$M = \left[ \begin{array} { c c c c c } { 0 } & { 0 } & { 1 / 2 } & { 0 } & { 1 / 2 } \\ { 0 } & { 0 } & { 1 } & { 0 } & { 0 } \\ { 1 / 4 } & { 1 / 4 } & { 0 } & { 1 / 4 } & { 1 / 4 } \\ { 0 } & { 0 } & { 1 / 2 } & { 0 } & { 1 / 2 } \\ { 0 } & { 0 } & { 0 } & { 0 } & { 1 } \end{array} \right]$


<p>These initial ranks are successively updated by adding up the weights of every page that link to them divided by the number of links emanating from the referring page. If a page has no outlinks, its rank is equally redistributed to the other pages in the graph. This redistribution is applied to all the pages in the graph until the ranks stabilize. Computing this distribution is the equivalent of taking the limiting distribution of the chain containing all the ranks.</p>
<h5 id="312-damping-factor">3.1.2 Damping factor<a hidden class="anchor" aria-hidden="true" href="#312-damping-factor">#</a></h5>
<p>In practice, the PageRank algorithm adds a damping factor $d$ at each stage to prevent pages with no outgoing links from affecting the PageRanks of pages connected to them. This heuristic relfects the probability that a random surfer on the web may choose to randomly &ldquo;jump&rdquo; from one node to another in the web graph. This may happen when he decides to type another page&rsquo;s address directly into the search bar on the browser after hitting a dead end. The damping factor ranges from 0 - 1 where 0 corresponds to successive random jumps between different pages and 1 to a sequence of random successive clicks that inevitably lead to a page with no outgoing links. The sum of weighted PageRanks of all pages is multiplied by this value.</p>
<h4 id="32-simulating-pagerank">3.2 Simulating PageRank<a hidden class="anchor" aria-hidden="true" href="#32-simulating-pagerank">#</a></h4>
<p>In this section, R code that simulates PageRank is presented. It begins by generating a random n by n adjacency matrix containing the link structure between different pairs of pages in an arbitrary web system and proceeds as follows:</p>
<pre class="r"><code># Define function to generate an adjacency matrix
A_gen <- function (n, d) {
  A <- matrix(sample(0:1, n*n, prob = c(1-d, d), replace = T), ncol = n, byrow = T)
  return(A)
}
</code></pre>
<ol>
<li>The adjacency matrix generated above and the damping factor $d$ are used as inputs to the <code>page_rank()</code> function defined below which calculates the ranks of all the vertices in the graph. The process starts with the initialization of a transition matrix and proceeds to iteratively calculate the rank of all pages until the Markov chain converges.</li>
</ol>
<pre class="r"><code># Define PageRank function (p = probability of teleport)
PageRank <- function (A, p, output = T) {
  # Define assertions
  if (!is.matrix(A) | !all(A %in% 0:1)) {
    stop(noquote('no (valid) adjacency matrix is provided.'))
  } else if (!is.numeric(p) | p < 0 | p > 1) {
    stop(noquote('p must be a probability between 0 and 1.'))
  }
  # Initialize transition matrix
  s <- matrix(rep(NA, ncol(A)), ncol = ncol(A))
  s[1, ] <- rep(1/ncol(A), ncol(A))
  i <- 1
  # Repeat Markov Chain until convergence
  while (T) {
    # Calculate transition vector at t + 1
    t <- rep(NA, ncol(A))
    for (j in 1:ncol(A)) {
      t[j] <- ifelse(sum(A[j, ]) == 0 
            , 1 / ncol(A)
            , p / ncol(A) + (1 - p) * sum(A[, j] * (s[i, ] / apply(A, 1, sum))))}
    s <- rbind(s, t)
    i <- i + 1
    # Break if converged
    if (i > 1) if (all(round(s[i - 1, ], 4) == round(s[i, ], 4))) break
  }
  # Build and return output
  rank <- data.frame(as.character(1:ncol(s)), round(s[i, ], 4), rep(p, ncol(A)))
  colnames(rank) <- c('Node', 'PageRank', 'P')
  if (output) {
    cat(noquote('PageRank Output:\n\n'))
    print(rank[order(-rank$PageRank), c('Node', 'PageRank')], row.names = F)
    cat(noquote(paste('\nPageRank converged in', i, 'iterations.')))
  } else {
    return(rank[order(-rank$PageRank), ])
  }
}

</code></pre>
<pre class="r"><code># Generate graph
set.seed(327)
A <- A_gen(10, .6)
</code></pre>
<ol start="2">
<li>The process modeled above is ran on a graph with 10 vertices and <code>r sum(A)</code> edges. A visual representation of how different nodes in the graph are connected is also generated. Below it, is output showing the page ranks of all 10 nodes.</li>
</ol>
<pre class="r"><code># Plot the graph
plot(graph.adjacency(A,'directed'))
</code></pre>
<center>
<img align="middle" src="https://raw.githubusercontent.com/Nzaba/nzaba.github.io/main/content/posts/imgs/Graph%20Simulation.jpeg">
</center>
<pre class="r"><code># Run PageRank on example graph above with d = 0.2
PageRank(A, .2)
</code></pre>
<pre class="r"><code>## 
## Node:   PageRank
## 2       0.1419	     
## 1       0.1143	  
## 3       0.1103	  
## 9	   0.1078
## 10      0.1056     
## 7       0.0995  
## 6       0.0916  
## 4	   0.0904	
## 8       0.0803     
## 5       0.0582  
</code></pre>
<h3 id="3-limitations">3. Limitations<a hidden class="anchor" aria-hidden="true" href="#3-limitations">#</a></h3>
<p>The original paper on PageRank by Brin et al (1998) presents dangling links on the web as a pertinent issue affecting the model. It decribes them as links that point to pages with no outgoing links and states that they affect the model because it is not clear where their weights should be distributed. The ultimate proposition made in the paper is the removal of all these links until all the PageRanks are calculated. Brin and Page postulate that the addition of these links thereafter doesn&rsquo;t affect things significantly.</p>
<h3 id="4-conclusion">4. Conclusion<a hidden class="anchor" aria-hidden="true" href="#4-conclusion">#</a></h3>
<p>PageRank is a powerful tool that has greatly simplified and democratized the access to information on the web. The advent of this algorithm has seen the emergence of a Search Engine Optimization industry which is a discipline focused on organically increasing the reputation of online content to increase visibility and improve rankings on the web. However, one of the major challenges this poses to PageRank is that commercial entities may try to artificially game the system to increase the visibility of their online content.</p>
<h3 id="5-references">5. References<a hidden class="anchor" aria-hidden="true" href="#5-references">#</a></h3>
<ol>
<li>
<p>Langville, Amy N., and Carl D. Meyer. ‚ÄúThe Mathematics of Google‚Äôs PageRank.‚Äù Google&rsquo;s PageRank and Beyond: The Science of Search Engine Rankings, Princeton University Press, 2006, pp. 31‚Äì46. JSTOR, <a href="https://www.jstor.org/stable/j.ctt7t8z9.7">www.jstor.org/stable/j.ctt7t8z9.7</a>.</p>
</li>
<li>
<p>Benincasa, Catherine &amp; Calden, Adena &amp; Hanlon, Emily &amp; Kindzerske, Matthew &amp; Law, Kody &amp; Lam, Eddery &amp; Rhoades, John &amp; Roy, Ishani &amp; Satz, Michael &amp; Valentine, Eric &amp; Whitaker, N. (2018). Page Rank Algorithm.</p>
</li>
<li>
<p>Dobrow, R. P.. Probability : With Applications and R, John Wiley &amp; Sons, Incorporated, 2013. ProQuest Ebook Central, <a href="https://ebookcentral.proquest.com/lib/amherst/detail.action?docID=1449975">https://ebookcentral.proquest.com/lib/amherst/detail.action?docID=1449975</a>.</p>
</li>
<li>
<p>Sergey Brin, and Larry Page. Bringing Order to the Web.</p>
</li>
<li>
<p>Hwai-Hui Fu, et al. ‚ÄúAPPLIED STOCHASTIC MODELS IN BUSINESS AND INDUSTRY.‚Äù Damping Factor in Google Page Ranking, 29 June 2006, pp. 1‚Äì14.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/PageRank">https://en.wikipedia.org/wiki/PageRank</a></p>
</li>
</ol>


<style>
.emojify {
	font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols;
	font-size: 2rem;
	vertical-align: middle;
}
@media screen and (max-width:650px) {
  .nowrap {
    display: block;
    margin: 25px 0;
  }
}
</style>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://nzaba.github.io/tags/big-data-information-retrieval-graph-theory/">Big Data, Information Retrieval, Graph Theory</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://nzaba.github.io/posts/defaultriskcalculations/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>Default Risk Estimation Methods</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Markov Chains Demystified on twitter"
        href="https://twitter.com/intent/tweet/?text=Markov%20Chains%20Demystified&amp;url=https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f&amp;hashtags=BigData%2cInformationRetrieval%2cGraphTheory">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Markov Chains Demystified on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f&amp;title=Markov%20Chains%20Demystified&amp;summary=Markov%20Chains%20Demystified&amp;source=https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Markov Chains Demystified on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f&title=Markov%20Chains%20Demystified">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Markov Chains Demystified on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Markov Chains Demystified on whatsapp"
        href="https://api.whatsapp.com/send?text=Markov%20Chains%20Demystified%20-%20https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Markov Chains Demystified on telegram"
        href="https://telegram.me/share/url?text=Markov%20Chains%20Demystified&amp;url=https%3a%2f%2fnzaba.github.io%2fposts%2fpagerank%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://nzaba.github.io/">Ray</a></span>
    <span>
        Made with
        &#9749;&
        &#10084; in üá∞üá™
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
